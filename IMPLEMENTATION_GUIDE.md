# ğŸš€ Auto Dashboard - ì „ì²´ êµ¬í˜„ ìƒí™© ë¬¸ì„œ

> **ì‘ì„±ì¼**: 2025-12-14
> **ë²„ì „**: 3.0.0
> **ìƒíƒœ**: âœ… Production Ready + AI Integration Complete

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [ë°±ì—”ë“œ êµ¬í˜„](#-ë°±ì—”ë“œ-êµ¬í˜„)
4. [í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„](#-í”„ë¡ íŠ¸ì—”ë“œ-êµ¬í˜„)
5. [AI ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ](#-ai-ì—ì´ì „íŠ¸-ì‹œìŠ¤í…œ)
6. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
7. [ë°°í¬ í™˜ê²½](#-ë°°í¬-í™˜ê²½)
8. [API ì—”ë“œí¬ì¸íŠ¸](#-api-ì—”ë“œí¬ì¸íŠ¸)
9. [ë³´ì•ˆ êµ¬í˜„](#-ë³´ì•ˆ-êµ¬í˜„)
10. [ì‹¤í–‰ ë°©ë²•](#-ì‹¤í–‰-ë°©ë²•)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

### ì‹œìŠ¤í…œ ì†Œê°œ
**Auto Dashboard**ëŠ” Bitget ê±°ë˜ì†Œ ê¸°ë°˜ ì•”í˜¸í™”í ì„ ë¬¼ ìë™ ê±°ë˜ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. DeepSeek AIë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ ì‹œì¥ ë¶„ì„ê³¼ ìë™ ë§¤ë§¤ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

### í•µì‹¬ ê¸°ëŠ¥
- âœ… **ì‹¤ì‹œê°„ ìë™ ë§¤ë§¤**: Bitget USDT-M ì„ ë¬¼ ê±°ë˜
- âœ… **AI ì „ëµ ìƒì„±**: DeepSeek AI ê¸°ë°˜ ì „ëµ ìë™ ìƒì„±
- âœ… **ì‹¤ì‹œê°„ ì‹œì¥ ë¶„ì„**: AIê°€ 5ì´ˆë§ˆë‹¤ ì‹œì¥ ë°ì´í„° ë¶„ì„
- âœ… **ë‹¤ì¤‘ ì „ëµ ì§€ì›**: EMA, RSI, Bollinger Band, MACD, AI ì „ëµ
- âœ… **ì‹¤ì‹œê°„ ì°¨íŠ¸**: Lightweight Charts ê¸°ë°˜ ìº”ë“¤ ì°¨íŠ¸
- âœ… **WebSocket ìŠ¤íŠ¸ë¦¬ë°**: ì‹¤ì‹œê°„ ì‹œì¥ ë°ì´í„° ë° ë´‡ ìƒíƒœ
- âœ… **ë°±í…ŒìŠ¤íŒ…**: ê³¼ê±° ë°ì´í„° ê¸°ë°˜ ì „ëµ ê²€ì¦
- âœ… **ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ**: ì‚¬ìš©ì/ë´‡/ì „ëµ í†µí•© ê´€ë¦¬

### ê¸°ìˆ  ìŠ¤íƒ ìš”ì•½

| ë¶„ë¥˜ | ê¸°ìˆ  |
|------|------|
| **Backend** | FastAPI, Python 3.11, SQLAlchemy 2.0, asyncpg |
| **Frontend** | React 18, Vite, Ant Design, Recharts |
| **Database** | PostgreSQL (ìš´ì˜), SQLite (ê°œë°œ) |
| **Cache** | Redis |
| **AI** | DeepSeek API (ì‹¤ì‹œê°„ ì‹œì¥ ë¶„ì„) |
| **Exchange** | Bitget Futures API |
| **WebSocket** | FastAPI WebSocket, Lightweight Charts |
| **Deployment** | Docker Compose, Nginx |
| **Monitoring** | Custom Logging, Telegram Notifications |

---

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       í´ë¼ì´ì–¸íŠ¸                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  React UI   â”‚  â”‚ TradingView  â”‚  â”‚  WebSocket   â”‚       â”‚
â”‚  â”‚  (Ant.D)    â”‚  â”‚    Charts    â”‚  â”‚   Client     â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                  â”‚
          â”‚ HTTP/REST      â”‚ WS               â”‚ WS
          â–¼                â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Nginx (ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ)                      â”‚
â”‚         - /api/v1/* â†’ Backend API                           â”‚
â”‚         - /ws/* â†’ WebSocket                                 â”‚
â”‚         - /* â†’ Frontend Static Files                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FastAPI Backend                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  REST API   â”‚  â”‚  WebSocket   â”‚  â”‚ Background   â”‚       â”‚
â”‚  â”‚ Endpoints   â”‚  â”‚   Server     â”‚  â”‚   Workers    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                â”‚                  â”‚                â”‚
â”‚         â–¼                â–¼                  â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚            Services Layer                        â”‚        â”‚
â”‚  â”‚  - bot_runner.py (ë§¤ë§¤ ë¡œì§)                     â”‚        â”‚
â”‚  â”‚  - deepseek_service.py (AI ë¶„ì„)                â”‚        â”‚
â”‚  â”‚  - bitget_rest.py (ê±°ë˜ì†Œ API)                  â”‚        â”‚
â”‚  â”‚  - chart_data_service.py (ì°¨íŠ¸ ë°ì´í„°)           â”‚        â”‚
â”‚  â”‚  - strategy_loader.py (ì „ëµ ë¡œë”©)                â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Data Layer                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ PostgreSQL   â”‚  â”‚    Redis     â”‚  â”‚  DeepSeek    â”‚      â”‚
â”‚  â”‚   (Main DB)  â”‚  â”‚   (Cache)    â”‚  â”‚   AI API     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
          â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  External Services                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚    Bitget    â”‚  â”‚   Telegram   â”‚                         â”‚
â”‚  â”‚   Futures    â”‚  â”‚     Bot      â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° íë¦„

```
1. ì‹œì¥ ë°ì´í„° ìˆ˜ì§‘
   Bitget WebSocket â†’ bitget_ws_collector â†’ market_queue â†’ bot_runner

2. AI ì „ëµ ì‹¤í–‰
   bot_runner â†’ deepseek_service â†’ AI ë¶„ì„ â†’ ë§¤ë§¤ ì‹ í˜¸ ìƒì„±

3. ì£¼ë¬¸ ì‹¤í–‰
   bot_runner â†’ bitget_rest â†’ Bitget API â†’ ì£¼ë¬¸ ì²´ê²°

4. ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
   bot_runner â†’ chart_data_service â†’ WebSocket â†’ í´ë¼ì´ì–¸íŠ¸

5. ì•Œë¦¼ ì „ì†¡
   bot_runner â†’ telegram_notifier â†’ Telegram Bot â†’ ì‚¬ìš©ì
```

---

## ğŸ”§ ë°±ì—”ë“œ êµ¬í˜„

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                      # REST API ì—”ë“œí¬ì¸íŠ¸ (36ê°œ íŒŒì¼)
â”‚   â”‚   â”œâ”€â”€ ai_strategy.py        # AI ì „ëµ ìƒì„±/ì¡°íšŒ
â”‚   â”‚   â”œâ”€â”€ auth.py               # ì¸ì¦ (ë¡œê·¸ì¸/íšŒì›ê°€ì…)
â”‚   â”‚   â”œâ”€â”€ bot.py                # ë´‡ ì œì–´ (ì‹œì‘/ì¤‘ì§€/ìƒíƒœ)
â”‚   â”‚   â”œâ”€â”€ strategy.py           # ì „ëµ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ backtest.py           # ë°±í…ŒìŠ¤íŒ…
â”‚   â”‚   â”œâ”€â”€ chart.py              # ì°¨íŠ¸ ë°ì´í„°
â”‚   â”‚   â”œâ”€â”€ order.py              # ì£¼ë¬¸ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ admin_*.py            # ê´€ë¦¬ì API (7ê°œ)
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                 # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (30+ íŒŒì¼)
â”‚   â”‚   â”œâ”€â”€ bot_runner.py         # ë´‡ ì‹¤í–‰ ì—”ì§„ (93KB, í•µì‹¬)
â”‚   â”‚   â”œâ”€â”€ deepseek_service.py   # DeepSeek AI í†µí•©
â”‚   â”‚   â”œâ”€â”€ bitget_rest.py        # Bitget REST API (33KB)
â”‚   â”‚   â”œâ”€â”€ bitget_ws.py          # Bitget WebSocket
â”‚   â”‚   â”œâ”€â”€ chart_data_service.py # ì‹¤ì‹œê°„ ì°¨íŠ¸ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ strategy_loader.py    # ë™ì  ì „ëµ ë¡œë”©
â”‚   â”‚   â”œâ”€â”€ candle_cache.py       # ìº”ë“¤ ë°ì´í„° ìºì‹±
â”‚   â”‚   â”œâ”€â”€ alert_monitor.py      # ì•Œë¦¼ ëª¨ë‹ˆí„°ë§
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ strategies/               # íŠ¸ë ˆì´ë”© ì „ëµ
â”‚   â”‚   â”œâ”€â”€ dynamic_strategy_executor.py  # ë™ì  ì „ëµ ì‹¤í–‰ê¸°
â”‚   â”‚   â”œâ”€â”€ proven_conservative_strategy.py
â”‚   â”‚   â”œâ”€â”€ proven_balanced_strategy.py
â”‚   â”‚   â”œâ”€â”€ proven_aggressive_strategy.py
â”‚   â”‚   â””â”€â”€ ai_role_division_strategy.py
â”‚   â”‚
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ models.py             # SQLAlchemy ëª¨ë¸ (25ê°œ í…Œì´ë¸”)
â”‚   â”‚   â”œâ”€â”€ db.py                 # DB ì„¸ì…˜ ê´€ë¦¬
â”‚   â”‚   â””â”€â”€ session.py            # ë¹„ë™ê¸° ì„¸ì…˜
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ error_handler.py      # ì „ì—­ ì—ëŸ¬ í•¸ë“¤ë§
â”‚   â”‚   â”œâ”€â”€ rate_limit_improved.py # Rate Limiting
â”‚   â”‚   â”œâ”€â”€ request_context.py    # ìš”ì²­ ì»¨í…ìŠ¤íŠ¸
â”‚   â”‚   â””â”€â”€ admin_ip_whitelist.py # IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ jwt_auth.py           # JWT ì¸ì¦
â”‚   â”‚   â”œâ”€â”€ encryption.py         # Fernet ì•”í˜¸í™”
â”‚   â”‚   â””â”€â”€ bitget_exceptions.py  # Bitget ì˜ˆì™¸ ì²˜ë¦¬
â”‚   â”‚
â”‚   â”œâ”€â”€ websockets/
â”‚   â”‚   â””â”€â”€ ws_server.py          # WebSocket ì„œë²„
â”‚   â”‚
â”‚   â”œâ”€â”€ workers/
â”‚   â”‚   â””â”€â”€ manager.py            # ë°±ê·¸ë¼ìš´ë“œ ì›Œì»¤
â”‚   â”‚
â”‚   â”œâ”€â”€ config.py                 # ì„¤ì • ê´€ë¦¬
â”‚   â””â”€â”€ main.py                   # FastAPI ì•± ì§„ì…ì 
â”‚
â”œâ”€â”€ alembic/                      # DB ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ versions/
â”‚       â””â”€â”€ 001_full_schema.py    # í†µí•© ìŠ¤í‚¤ë§ˆ
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ init_admin.py             # ê´€ë¦¬ì ê³„ì • ìƒì„±
â”‚   â””â”€â”€ register_proven_strategies.py  # ì „ëµ ë“±ë¡
â”‚
â”œâ”€â”€ requirements.txt              # Python íŒ¨í‚¤ì§€
â””â”€â”€ Dockerfile                    # Docker ì´ë¯¸ì§€
```

### í•µì‹¬ ì„œë¹„ìŠ¤ ìƒì„¸

#### 1. Bot Runner (`bot_runner.py`)
**ì—­í• **: ìë™ ë§¤ë§¤ ì—”ì§„ì˜ í•µì‹¬
**í¬ê¸°**: 93KB (2,000+ ì¤„)

**ì£¼ìš” ê¸°ëŠ¥**:
```python
class BotRunner:
    async def _run_loop(self):
        """ë©”ì¸ ì‹¤í–‰ ë£¨í”„"""
        # 1. ì‹œì¥ ë°ì´í„° ìˆ˜ì§‘
        # 2. ì „ëµ ì‹¤í–‰ (AI ë˜ëŠ” ì¼ë°˜ ì „ëµ)
        # 3. ë§¤ë§¤ ì‹ í˜¸ ìƒì„±
        # 4. í¬ì§€ì…˜ ê´€ë¦¬
        # 5. ë¦¬ìŠ¤í¬ ê´€ë¦¬
        # 6. í…”ë ˆê·¸ë¨ ì•Œë¦¼
        # 7. ì°¨íŠ¸ ë°ì´í„° ë¸Œë¡œë“œìºìŠ¤íŠ¸
```

**ì§€ì› ê¸°ëŠ¥**:
- âœ… ì‹¤ì‹œê°„ ì‹œì¥ ë°ì´í„° ì²˜ë¦¬ (5ì´ˆ ê°„ê²©)
- âœ… ë™ì  ì „ëµ ë¡œë”©
- âœ… AI ì „ëµ í†µí•© (DeepSeek)
- âœ… í¬ì§€ì…˜ ìë™ ê´€ë¦¬ (ì§„ì…/ì²­ì‚°)
- âœ… Stop Loss / Take Profit
- âœ… ë ˆë²„ë¦¬ì§€ ì œì–´
- âœ… ìµœì†Œ íˆ¬ìê¸ˆ ê²€ì¦ (10 USDT)
- âœ… ìë™ ì¬ì‹œì‘ (ì„œë²„ ì¬ë¶€íŒ… ì‹œ)

#### 2. DeepSeek Service (`deepseek_service.py`)
**ì—­í• **: AI ê¸°ë°˜ ì‹œì¥ ë¶„ì„

**êµ¬í˜„ ë°©ì‹**:
```python
class DeepSeekService:
    async def analyze_market(
        self,
        market_data: dict,
        indicators: dict
    ) -> dict:
        """
        AIê°€ ì‹œì¥ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë§¤ë§¤ ì‹ í˜¸ ìƒì„±

        Input:
        - í˜„ì¬ê°€, ê³ ê°€, ì €ê°€
        - RSI, ì´ë™í‰ê· , ë³¼ë¦°ì €ë°´ë“œ
        - ê±°ë˜ëŸ‰, ë³€ë™ì„±

        Output:
        - action: "buy" | "sell" | "hold"
        - confidence: 0.0 ~ 1.0
        - reason: íŒë‹¨ ê·¼ê±° (í•œêµ­ì–´)
        """
```

**íŠ¹ì§•**:
- âœ… ì‹¤ì‹œê°„ API í˜¸ì¶œ (5ì´ˆë§ˆë‹¤)
- âœ… Rate Limiting (1ë¶„ì— 60íšŒ)
- âœ… ì—ëŸ¬ ì²˜ë¦¬ ë° ì¬ì‹œë„
- âœ… í•œêµ­ì–´ ë¶„ì„ ê²°ê³¼

#### 3. Bitget REST Client (`bitget_rest.py`)
**ì—­í• **: Bitget ê±°ë˜ì†Œ API í†µí•©
**í¬ê¸°**: 33KB

**ì£¼ìš” ë©”ì„œë“œ**:
```python
class BitgetRestClient:
    async def get_balance(self) -> dict
    async def get_positions(self) -> list
    async def place_market_order(...)
    async def place_limit_order(...)
    async def close_position(...)
    async def get_open_orders(...)
    async def cancel_order(...)
    async def get_leverage(...)
    async def set_leverage(...)
```

**êµ¬í˜„ íŠ¹ì§•**:
- âœ… ë¹„ë™ê¸° ì²˜ë¦¬ (asyncio)
- âœ… ìë™ ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ)
- âœ… Rate Limiting
- âœ… HMAC SHA256 ì„œëª…
- âœ… ì—ëŸ¬ íƒ€ì…ë³„ ì²˜ë¦¬

#### 4. Strategy Loader (`strategy_loader.py`)
**ì—­í• **: ë™ì  ì „ëµ ë¡œë”© ë° ì‹¤í–‰

**ì§€ì› ì „ëµ íƒ€ì…**:
```python
STRATEGY_MAP = {
    "deepseek_ai": "strategies.ai_role_division_strategy",
    "proven_conservative": "strategies.proven_conservative_strategy",
    "proven_balanced": "strategies.proven_balanced_strategy",
    "proven_aggressive": "strategies.proven_aggressive_strategy",
    "ema": "strategies.dynamic_strategy_executor",
    "rsi": "strategies.dynamic_strategy_executor",
    "bollinger": "strategies.dynamic_strategy_executor",
    "macd": "strategies.dynamic_strategy_executor",
}
```

**ë™ì  ë¡œë”© ë°©ì‹**:
```python
# ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì „ëµ ì •ë³´ ì¡°íšŒ
strategy = await db.get(Strategy, strategy_id)

# ì „ëµ íƒ€ì…ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ëª¨ë“ˆ ì„í¬íŠ¸
module = importlib.import_module(module_path)
strategy_class = getattr(module, class_name)

# ì „ëµ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë° ì‹¤í–‰
instance = strategy_class(params)
signal = await instance.generate_signal(market_data)
```

---

## ğŸ’» í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/                    # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ Login.jsx             # ë¡œê·¸ì¸/íšŒì›ê°€ì… (OAuth ì§€ì›)
â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx         # ëŒ€ì‹œë³´ë“œ (ì‹¤ì‹œê°„ í†µê³„)
â”‚   â”‚   â”œâ”€â”€ Trading.jsx           # ì‹¤ì‹œê°„ ì°¨íŠ¸
â”‚   â”‚   â”œâ”€â”€ BotManagement.jsx     # ë´‡ ì œì–´
â”‚   â”‚   â”œâ”€â”€ BacktestingPage.jsx   # ë°±í…ŒìŠ¤íŒ…
â”‚   â”‚   â”œâ”€â”€ Settings.jsx          # ì„¤ì • (API í‚¤, í”„ë¡œí•„)
â”‚   â”‚   â”œâ”€â”€ Strategy.jsx          # ì „ëµ ì„ íƒ
â”‚   â”‚   â””â”€â”€ admin/                # ê´€ë¦¬ì í˜ì´ì§€ (6ê°œ)
â”‚   â”‚
â”‚   â”œâ”€â”€ components/               # ì¬ì‚¬ìš© ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ TradingChart.jsx      # Lightweight Charts
â”‚   â”‚   â”œâ”€â”€ BotStatus.jsx         # ë´‡ ìƒíƒœ í‘œì‹œ
â”‚   â”‚   â”œâ”€â”€ StrategyCard.jsx      # ì „ëµ ì¹´ë“œ
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ api.js                # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ websocket.js          # WebSocket í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â””â”€â”€ auth.js               # ì¸ì¦ ì„œë¹„ìŠ¤
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useWebSocket.js       # WebSocket Hook
â”‚   â”‚   â””â”€â”€ useAuth.js            # ì¸ì¦ Hook
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ formatters.js         # ë°ì´í„° í¬ë§·íŒ…
â”‚   â”‚   â””â”€â”€ constants.js          # ìƒìˆ˜ ì •ì˜
â”‚   â”‚
â”‚   â””â”€â”€ App.jsx                   # ì•± ì§„ì…ì 
â”‚
â”œâ”€â”€ nginx.conf                    # Nginx ì„¤ì •
â”œâ”€â”€ package.json                  # NPM íŒ¨í‚¤ì§€
â””â”€â”€ Dockerfile                    # Docker ì´ë¯¸ì§€
```

### ì£¼ìš” í˜ì´ì§€ ìƒì„¸

#### 1. Dashboard (`Dashboard.jsx`)
**ê¸°ëŠ¥**:
- âœ… ì‹¤ì‹œê°„ ìˆ˜ìµë¥  ì°¨íŠ¸ (Recharts)
- âœ… ì´ ìì‚°, PnL, ROI í‘œì‹œ
- âœ… ìµœê·¼ ê±°ë˜ ë‚´ì—­
- âœ… í™œì„± í¬ì§€ì…˜ ëª©ë¡
- âœ… WebSocket ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸

**êµ¬í˜„**:
```javascript
function Dashboard() {
  const [stats, setStats] = useState({})
  const ws = useWebSocket('/ws/user/1?token=...')

  useEffect(() => {
    ws.on('equity_update', (data) => {
      setStats(prev => ({...prev, equity: data.equity}))
    })
  }, [])

  return (
    <div>
      <StatCard title="ì´ ìì‚°" value={stats.equity} />
      <PnLChart data={stats.history} />
      <RecentTrades trades={stats.trades} />
    </div>
  )
}
```

#### 2. Trading Chart (`Trading.jsx`)
**ê¸°ëŠ¥**:
- âœ… Lightweight Charts í†µí•©
- âœ… ì‹¤ì‹œê°„ ìº”ë“¤ ì—…ë°ì´íŠ¸
- âœ… ë‹¤ì¤‘ íƒ€ì„í”„ë ˆì„ (1m, 5m, 15m, 1h, 4h, 1d)
- âœ… ê±°ë˜ ë§ˆì»¤ í‘œì‹œ
- âœ… í¬ì§€ì…˜ ì§„ì…/ì²­ì‚° í‘œì‹œ

**êµ¬í˜„**:
```javascript
function TradingChart({ symbol }) {
  const chartRef = useRef()
  const ws = useWebSocket()

  useEffect(() => {
    const chart = createChart(chartRef.current)
    const candleSeries = chart.addCandlestickSeries()

    ws.on('candle_update', (candle) => {
      candleSeries.update({
        time: candle.time,
        open: candle.open,
        high: candle.high,
        low: candle.low,
        close: candle.close
      })
    })
  }, [symbol])
}
```

#### 3. Bot Management (`BotManagement.jsx`)
**ê¸°ëŠ¥**:
- âœ… ë´‡ ì‹œì‘/ì¤‘ì§€ ë²„íŠ¼
- âœ… ì‹¤ì‹œê°„ ë´‡ ìƒíƒœ (running/stopped)
- âœ… ì „ëµ ì„ íƒ ë“œë¡­ë‹¤ìš´
- âœ… ë ˆë²„ë¦¬ì§€ ì„¤ì •
- âœ… í¬ì§€ì…˜ í¬ê¸° ì„¤ì •
- âœ… ë´‡ ë¡œê·¸ ì‹¤ì‹œê°„ í‘œì‹œ

**ìƒíƒœ ê´€ë¦¬**:
```javascript
function BotManagement() {
  const [botStatus, setBotStatus] = useState('stopped')
  const [selectedStrategy, setSelectedStrategy] = useState(null)

  const startBot = async () => {
    const res = await api.post('/bot/start', {
      strategy_id: selectedStrategy,
      leverage: 10
    })
    setBotStatus('running')
  }

  const stopBot = async () => {
    await api.post('/bot/stop')
    setBotStatus('stopped')
  }
}
```

---

## ğŸ¤– AI ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ

### DeepSeek AI í†µí•©

#### ì „ëµ íƒ€ì…
```python
# AI ì „ëµ ID: 8
{
  "id": 8,
  "name": "DeepSeek AI ì „ëµ",
  "type": "deepseek_ai",
  "description": "ì‹¤ì‹œê°„ AI ì‹œì¥ ë¶„ì„ ê¸°ë°˜ ìë™ ë§¤ë§¤",
  "parameters": {
    "symbol": "BTCUSDT",
    "timeframe": "5m",
    "leverage": 10,
    "position_size_percent": 30,
    "ai_call_interval": 5  # 5ì´ˆë§ˆë‹¤ AI ë¶„ì„
  }
}
```

#### AI ë¶„ì„ í”„ë¡œì„¸ìŠ¤

```
1. ì‹œì¥ ë°ì´í„° ìˆ˜ì§‘
   â”œâ”€ í˜„ì¬ê°€: $90,269.10
   â”œâ”€ ì´ë™í‰ê· : MA9, MA21
   â”œâ”€ RSI: 64.4
   â”œâ”€ ë³¼ë¦°ì €ë°´ë“œ: Upper/Middle/Lower
   â””â”€ ê±°ë˜ëŸ‰: 88,901 BTC

2. AI í”„ë¡¬í”„íŠ¸ ìƒì„±
   "í˜„ì¬ BTCUSDT ì‹œì¥ ìƒí™©:
    - ê°€ê²©: $90,269.10
    - MA9: $90,200
    - MA21: $90,150
    - RSI: 64.4
    - ë³¼ë¦°ì €ë°´ë“œ ì¤‘ì‹¬: $90,250

    ë§¤ìˆ˜/ë§¤ë„/ê´€ë§ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ê³  ì´ìœ ë¥¼ ì„¤ëª…í•˜ì„¸ìš”."

3. DeepSeek API í˜¸ì¶œ
   POST https://api.deepseek.com/v1/chat/completions

4. AI ì‘ë‹µ íŒŒì‹±
   {
     "action": "hold",
     "confidence": 0.5,
     "reason": "í˜„ì¬ ê°€ê²©ì´ MA9ê³¼ MA21 ì‚¬ì´ì—ì„œ íš¡ë³´ ì¤‘ì´ë©°,
               RSIëŠ” ì¤‘ë¦½ êµ¬ê°„. ëª…í™•í•œ ì¶”ì„¸ë‚˜ ëŒíŒŒ ì‹ í˜¸ ì—†ìŒ."
   }

5. ë§¤ë§¤ ì‹ í˜¸ ìƒì„±
   â”œâ”€ buy: confidence > 0.7 â†’ ë¡± í¬ì§€ì…˜ ì§„ì…
   â”œâ”€ sell: confidence > 0.7 â†’ ìˆ í¬ì§€ì…˜ ì§„ì…
   â””â”€ hold: ëŒ€ê¸°
```

#### AI ì „ëµ ìƒì„± API

**ì—”ë“œí¬ì¸íŠ¸**: `POST /api/v1/ai/strategies/generate`

**ìš”ì²­**:
```json
{
  "prompt": "Create a scalping strategy for BTC with high frequency trades",
  "count": 3
}
```

**ì‘ë‹µ**:
```json
{
  "success": true,
  "message": "3ê°œì˜ ì „ëµì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "strategies": [
    {
      "id": 9,
      "name": "ì´ì¤‘ ì´ë™í‰ê·  ëª¨ë©˜í…€ ì „ëµ",
      "description": "15ë¶„ë´‰ì—ì„œ ë¹ ë¥¸ ì´ë™í‰ê· ì´ ëŠë¦° ì´ë™í‰ê· ì„...",
      "type": "momentum",
      "symbol": "btc_usdt",
      "timeframe": "15m",
      "parameters": {
        "ma_fast": 9,
        "ma_slow": 21,
        "rsi_period": 14,
        "stop_loss_pct": 1.5,
        "take_profit_pct": 3.0
      }
    }
  ]
}
```

#### ì‹¤ì‹œê°„ AI ë¡œê·¸ ì˜ˆì‹œ

```
2025-12-14 04:38:48 - ğŸ”„ Processing market data: BTCUSDT @ $90,269.10 (user 1)
2025-12-14 04:38:48 - ğŸ¤– Loading DeepSeek AI Strategy
2025-12-14 04:38:51 - ğŸ¤– DeepSeek AI Signal: hold (confidence: 0.5)
                      reason: í˜„ì¬ ê°€ê²©ì´ MA9ê³¼ MA21 ì‚¬ì´ì—ì„œ íš¡ë³´ ì¤‘
2025-12-14 04:38:51 - ğŸ” Signal check - action:hold, size:None
2025-12-14 04:38:51 - Strategy signal for user 1: hold (confidence: 0.50)
```

---

## ğŸ—„ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ìŠ¤í‚¤ë§ˆ êµ¬ì¡° (PostgreSQL)

#### 1. ì‚¬ìš©ì í…Œì´ë¸”
```sql
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR UNIQUE NOT NULL,
    password_hash VARCHAR,
    name VARCHAR(100),
    phone VARCHAR(20),
    role VARCHAR DEFAULT 'user',  -- 'user' | 'admin'
    exchange VARCHAR DEFAULT 'bitget',
    is_active BOOLEAN DEFAULT TRUE,
    oauth_provider VARCHAR(20),   -- 'google' | 'kakao' | NULL
    oauth_id VARCHAR(255),
    totp_secret VARCHAR,
    is_2fa_enabled BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 2. ì „ëµ í…Œì´ë¸”
```sql
CREATE TABLE strategies (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),  -- NULL = ê³µìš© ì „ëµ
    name VARCHAR(100) NOT NULL,
    description TEXT,
    params TEXT,  -- JSON ë¬¸ìì—´
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**ì „ëµ ì˜ˆì‹œ ë°ì´í„°**:
```sql
-- AI ì „ëµ
INSERT INTO strategies VALUES (
    8, NULL, 'DeepSeek AI ì „ëµ',
    'DeepSeek AIê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‹œì¥ì„ ë¶„ì„...',
    '{"type":"deepseek_ai","symbol":"BTCUSDT","leverage":10,...}',
    TRUE
);

-- ì¼ë°˜ ì „ëµ
INSERT INTO strategies VALUES (
    1, NULL, 'EMA Crossover',
    'Classic EMA crossover strategy...',
    '{"type":"ema","fast_ema":9,"slow_ema":21,...}',
    TRUE
);
```

#### 3. ë´‡ ìƒíƒœ í…Œì´ë¸”
```sql
CREATE TABLE bot_status (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    is_running BOOLEAN DEFAULT FALSE,
    strategy_id INTEGER REFERENCES strategies(id),
    current_position TEXT,  -- JSON
    last_signal TEXT,       -- JSON
    error_message TEXT,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 4. ê±°ë˜ ë‚´ì—­ í…Œì´ë¸”
```sql
CREATE TABLE trades (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    symbol VARCHAR(20),
    side VARCHAR(10),  -- 'buy' | 'sell'
    price DECIMAL(18, 8),
    quantity DECIMAL(18, 8),
    realized_pnl DECIMAL(18, 8),
    order_id VARCHAR(100),
    strategy_id INTEGER,
    executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 5. í¬ì§€ì…˜ í…Œì´ë¸”
```sql
CREATE TABLE positions (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    symbol VARCHAR(20),
    side VARCHAR(10),  -- 'long' | 'short'
    size DECIMAL(18, 8),
    entry_price DECIMAL(18, 8),
    liquidation_price DECIMAL(18, 8),
    unrealized_pnl DECIMAL(18, 8),
    leverage INTEGER,
    opened_at TIMESTAMP,
    closed_at TIMESTAMP
);
```

#### 6. API í‚¤ í…Œì´ë¸”
```sql
CREATE TABLE api_keys (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    exchange VARCHAR(20) DEFAULT 'bitget',
    api_key_encrypted TEXT,      -- Fernet ì•”í˜¸í™”
    secret_key_encrypted TEXT,   -- Fernet ì•”í˜¸í™”
    passphrase_encrypted TEXT,   -- Fernet ì•”í˜¸í™”
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**ì•”í˜¸í™” ë°©ì‹**:
```python
from cryptography.fernet import Fernet

# í‚¤ ìƒì„± (í™˜ê²½ë³€ìˆ˜ì—ì„œ ë¡œë“œ)
cipher = Fernet(settings.encryption_key.encode())

# ì•”í˜¸í™”
encrypted = cipher.encrypt(api_key.encode()).decode()

# ë³µí˜¸í™”
decrypted = cipher.decrypt(encrypted.encode()).decode()
```

### ì „ì²´ í…Œì´ë¸” ëª©ë¡ (25ê°œ)

1. **users** - ì‚¬ìš©ì ê³„ì •
2. **strategies** - ê±°ë˜ ì „ëµ
3. **bot_status** - ë´‡ ì‹¤í–‰ ìƒíƒœ
4. **bot_config** - ë´‡ ì„¤ì •
5. **bot_instances** - ë‹¤ì¤‘ ë´‡ ì¸ìŠ¤í„´ìŠ¤
6. **bot_logs** - ë´‡ ë¡œê·¸
7. **trades** - ê±°ë˜ ë‚´ì—­
8. **positions** - í¬ì§€ì…˜
9. **open_orders** - ë¯¸ì²´ê²° ì£¼ë¬¸
10. **api_keys** - API í‚¤
11. **user_settings** - ì‚¬ìš©ì ì„¤ì •
12. **risk_settings** - ë¦¬ìŠ¤í¬ ì„¤ì •
13. **equities** - ìì‚° ë‚´ì—­
14. **backtest_results** - ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼
15. **trading_signals** - ê±°ë˜ ì‹ í˜¸
16. **system_alerts** - ì‹œìŠ¤í…œ ì•Œë¦¼
17. **chart_annotations** - ì°¨íŠ¸ ì£¼ì„
18. **grid_bot_templates** - ê·¸ë¦¬ë“œ ë´‡ í…œí”Œë¦¿
19. **trend_bot_templates** - ì¶”ì„¸ ë´‡ í…œí”Œë¦¿
20. **bot_restart_tracking** - ë´‡ ì¬ì‹œì‘ ì¶”ì 
21. **alembic_version** - DB ë§ˆì´ê·¸ë ˆì´ì…˜ ë²„ì „

---

## ğŸš€ ë°°í¬ í™˜ê²½

### Docker Compose êµ¬ì„±

```yaml
version: '3.8'

services:
  # PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
  postgres:
    image: postgres:16-alpine
    environment:
      POSTGRES_DB: trading_prod
      POSTGRES_USER: trading_user
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U trading_user"]
      interval: 5s
      timeout: 5s
      retries: 5

  # Redis ìºì‹œ
  redis:
    image: redis:7-alpine
    command: redis-server --requirepass ${REDIS_PASSWORD}
    healthcheck:
      test: ["CMD", "redis-cli", "--raw", "ping"]
      interval: 5s
      timeout: 3s
      retries: 5

  # FastAPI ë°±ì—”ë“œ
  backend:
    build: ./backend
    environment:
      DATABASE_URL: postgresql+asyncpg://trading_user:${POSTGRES_PASSWORD}@postgres:5432/trading_prod
      ENCRYPTION_KEY: ${ENCRYPTION_KEY}
      JWT_SECRET: ${JWT_SECRET}
      DEEPSEEK_API_KEY: ${DEEPSEEK_API_KEY}
      TELEGRAM_BOT_TOKEN: ${TELEGRAM_BOT_TOKEN}
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  # React í”„ë¡ íŠ¸ì—”ë“œ
  frontend:
    build: ./frontend
    depends_on:
      - backend
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost/"]
      interval: 30s
      timeout: 10s
      retries: 3
    ports:
      - "3000:80"

networks:
  trading-network:
    driver: bridge

volumes:
  postgres_data:
```

### Nginx ì„¤ì •

```nginx
server {
    listen 80;
    server_name _;

    # API ë¼ìš°íŒ… (/api/v1/* â†’ Backend)
    location /api/v1/ {
        proxy_pass http://backend:8000/api/v1/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_cache_bypass $http_upgrade;
    }

    # WebSocket í”„ë¡ì‹œ
    location /ws/ {
        proxy_pass http://backend:8000/ws/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_read_timeout 86400;
    }

    # SPA ë¼ìš°íŒ… (HTMLì€ ìºì‹± ì•ˆ í•¨)
    location / {
        root /usr/share/nginx/html;
        try_files $uri $uri/ /index.html;
        add_header Cache-Control "no-cache, no-store, must-revalidate";
    }

    # ì •ì  íŒŒì¼ ìºì‹± (1ë…„)
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        root /usr/share/nginx/html;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

### í™˜ê²½ ë³€ìˆ˜ (.env)

```bash
# PostgreSQL
POSTGRES_PASSWORD=SecureTradingDB2024

# Redis
REDIS_PASSWORD=SecureRedis2024#

# Security Keys
ENCRYPTION_KEY=KI_ZEzFbsQoURTATJZkIKvao5TTrYA9aVArgAncr_Co=
JWT_SECRET=super-secret-jwt-key-for-trading-dashboard-2024

# CORS
CORS_ORIGINS=http://158.247.245.197:3000,http://158.247.245.197

# APIs
DEEPSEEK_API_KEY=sk-1c9d4ea0b16a40768ccfec9c5c81adef
TELEGRAM_BOT_TOKEN=8289295080:AAHce1EwlO6O33YbTHps_oaUHo7YJ4MBrso
TELEGRAM_CHAT_ID=7980845952

# Log Level
LOG_LEVEL=INFO
```

### ë°°í¬ ì„œë²„ ì •ë³´

- **ì„œë²„ IP**: 158.247.245.197
- **í”„ë¡ íŠ¸ì—”ë“œ**: http://158.247.245.197:3000
- **ë°±ì—”ë“œ API**: http://158.247.245.197:8000
- **API ë¬¸ì„œ**: http://158.247.245.197:8000/docs

---

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

### ì¸ì¦ API (`/api/v1/auth`)

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| POST | `/auth/register` | íšŒì›ê°€ì… |
| POST | `/auth/login` | ë¡œê·¸ì¸ (JWT ë°œê¸‰) |
| POST | `/auth/refresh` | í† í° ê°±ì‹  |
| GET | `/auth/me` | í˜„ì¬ ì‚¬ìš©ì ì •ë³´ |
| PUT | `/auth/password` | ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ |

### ë´‡ API (`/api/v1/bot`)

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| POST | `/bot/start` | ë´‡ ì‹œì‘ |
| POST | `/bot/stop` | ë´‡ ì¤‘ì§€ |
| GET | `/bot/status` | ë´‡ ìƒíƒœ ì¡°íšŒ |
| GET | `/bot/logs` | ë´‡ ë¡œê·¸ ì¡°íšŒ (SSE) |

### AI ì „ëµ API (`/api/v1/ai`)

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| POST | `/ai/strategies/generate` | AI ì „ëµ ìƒì„± (3ê°œ) |
| GET | `/ai/strategies/list` | ì „ëµ ëª©ë¡ (ê³µìš© + ë‚´ ì „ëµ) |
| GET | `/ai/strategies/{id}` | ì „ëµ ìƒì„¸ |

### ì „ëµ API (`/api/v1/strategy`)

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| GET | `/strategy/list` | ì „ëµ ëª©ë¡ |
| GET | `/strategy/{id}` | ì „ëµ ìƒì„¸ |
| POST | `/strategy/create` | ì „ëµ ìƒì„± (ê´€ë¦¬ì) |
| PUT | `/strategy/{id}` | ì „ëµ ìˆ˜ì • |
| DELETE | `/strategy/{id}` | ì „ëµ ì‚­ì œ |

### ë°±í…ŒìŠ¤íŒ… API (`/api/v1/backtest`)

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| POST | `/backtest/run` | ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰ |
| GET | `/backtest/results` | ê²°ê³¼ ëª©ë¡ |
| GET | `/backtest/{id}` | ê²°ê³¼ ìƒì„¸ |

### ì°¨íŠ¸ API (`/api/v1/chart`)

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| GET | `/chart/candles` | ìº”ë“¤ ë°ì´í„° |
| GET | `/chart/indicators` | ê¸°ìˆ ì  ì§€í‘œ |

### ì£¼ë¬¸ API (`/api/v1/order`)

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| POST | `/order/market` | ì‹œì¥ê°€ ì£¼ë¬¸ |
| POST | `/order/limit` | ì§€ì •ê°€ ì£¼ë¬¸ |
| GET | `/order/list` | ì£¼ë¬¸ ëª©ë¡ |
| DELETE | `/order/{id}` | ì£¼ë¬¸ ì·¨ì†Œ |

### ê³„ì • API (`/api/v1/account`)

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| GET | `/account/balance` | ì”ê³  ì¡°íšŒ |
| GET | `/account/positions` | í¬ì§€ì…˜ ëª©ë¡ |
| POST | `/account/save_keys` | API í‚¤ ì €ì¥ (ì•”í˜¸í™”) |
| GET | `/account/keys` | API í‚¤ ì¡°íšŒ |

### ê´€ë¦¬ì API (`/api/v1/admin`)

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| GET | `/admin/users` | ì‚¬ìš©ì ëª©ë¡ |
| GET | `/admin/bots` | ëª¨ë“  ë´‡ ìƒíƒœ |
| GET | `/admin/analytics` | ì‹œìŠ¤í…œ ë¶„ì„ |
| GET | `/admin/logs` | ì‹œìŠ¤í…œ ë¡œê·¸ |
| POST | `/admin/users/{id}/suspend` | ì‚¬ìš©ì ì •ì§€ |

### WebSocket ì—”ë“œí¬ì¸íŠ¸

| URL | ì„¤ëª… |
|-----|------|
| `/ws/user/{user_id}?token=...` | ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ |

**ì´ë²¤íŠ¸ íƒ€ì…**:
- `candle_update` - ìº”ë“¤ ì—…ë°ì´íŠ¸
- `equity_update` - ìì‚° ì—…ë°ì´íŠ¸
- `position_update` - í¬ì§€ì…˜ ì—…ë°ì´íŠ¸
- `bot_status_update` - ë´‡ ìƒíƒœ ë³€ê²½
- `bot_log` - ë´‡ ë¡œê·¸

---

## ğŸ”’ ë³´ì•ˆ êµ¬í˜„

### 1. JWT ì¸ì¦
```python
# JWT í† í° ìƒì„±
def create_access_token(user_id: int, role: str) -> str:
    payload = {
        "user_id": user_id,
        "email": user.email,
        "role": role,
        "exp": datetime.utcnow() + timedelta(days=1),
        "type": "access"
    }
    return jwt.encode(payload, settings.jwt_secret, algorithm="HS256")

# í† í° ê²€ì¦
@Depends
async def get_current_user_id(token: str = Depends(oauth2_scheme)):
    try:
        payload = jwt.decode(token, settings.jwt_secret, algorithms=["HS256"])
        return payload["user_id"]
    except JWTError:
        raise HTTPException(status_code=401, detail="Invalid token")
```

### 2. API í‚¤ ì•”í˜¸í™”
```python
from cryptography.fernet import Fernet

class EncryptionService:
    def __init__(self):
        self.cipher = Fernet(settings.encryption_key.encode())

    def encrypt(self, plaintext: str) -> str:
        return self.cipher.encrypt(plaintext.encode()).decode()

    def decrypt(self, ciphertext: str) -> str:
        return self.cipher.decrypt(ciphertext.encode()).decode()
```

### 3. Rate Limiting
```python
class EnhancedRateLimitMiddleware:
    def __init__(self):
        self.limits = {
            "/api/v1/ai/strategies/generate": (10, 3600),  # 10 requests/hour
            "/api/v1/bot/start": (5, 60),                  # 5 requests/minute
            "/api/v1/auth/login": (5, 300),                # 5 requests/5min
        }

    async def __call__(self, request: Request):
        key = f"{request.client.host}:{request.url.path}"
        count = await redis.incr(key)
        if count > limit:
            raise HTTPException(status_code=429, detail="Too many requests")
```

### 4. CORS ì„¤ì •
```python
app.add_middleware(
    CORSMiddleware,
    allow_origins=settings.cors_origins.split(","),
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### 5. ì…ë ¥ ê²€ì¦
```python
class LoginRequest(BaseModel):
    email: EmailStr
    password: str = Field(..., min_length=8, max_length=100)

class StrategyRequest(BaseModel):
    name: str = Field(..., min_length=1, max_length=100)
    leverage: int = Field(..., ge=1, le=125)
    symbol: str = Field(..., regex="^[A-Z]+USDT$")
```

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. ë¡œì»¬ ê°œë°œ í™˜ê²½

```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/yourusername/auto-dashboard.git
cd auto-dashboard

# 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘ (ENCRYPTION_KEY, JWT_SECRET ë“±)

# 3. ë°±ì—”ë“œ ì‹¤í–‰
cd backend
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

export DATABASE_URL="sqlite+aiosqlite:///./trading.db"
export ENCRYPTION_KEY="your-key-here"

# DB ë§ˆì´ê·¸ë ˆì´ì…˜
alembic upgrade head

# ê´€ë¦¬ì ê³„ì • ìƒì„±
python scripts/init_admin.py

# ì„œë²„ ì‹¤í–‰
uvicorn src.main:app --reload --host 0.0.0.0 --port 8000

# 4. í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰ (ìƒˆ í„°ë¯¸ë„)
cd frontend
npm install
npm run dev
```

**ì ‘ì†**:
- Frontend: http://localhost:3000
- Backend API: http://localhost:8000
- API Docs: http://localhost:8000/docs

### 2. Docker ìš´ì˜ í™˜ê²½

```bash
# 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘

# 2. Docker Compose ì‹¤í–‰
docker compose up -d --build

# 3. ë¡œê·¸ í™•ì¸
docker compose logs -f backend

# 4. ê´€ë¦¬ì ê³„ì • ìƒì„±
docker exec trading-backend python scripts/init_admin.py

# 5. Health Check
curl http://localhost:8000/health
```

**ì ‘ì†**:
- Frontend: http://localhost:3000
- Backend API: http://localhost:8000

### 3. ìš´ì˜ ì„œë²„ ë°°í¬

```bash
# 1. ì„œë²„ ì ‘ì†
ssh root@158.247.245.197

# 2. ì½”ë“œ ì—…ë°ì´íŠ¸
cd /root/auto-dashboard
git pull origin main

# 3. í™˜ê²½ ë³€ìˆ˜ í™•ì¸
cat .env

# 4. ì¬ë°°í¬
docker compose down
docker compose up -d --build

# 5. ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
docker ps
docker compose logs -f backend
```

### 4. ê´€ë¦¬ì ê³„ì • ì„¤ì •

**ê¸°ë³¸ ê³„ì •**:
- Email: admin@admin.com
- Password: Admin123!

**ë¹„ë°€ë²ˆí˜¸ ë³€ê²½**:
```bash
# Python ìŠ¤í¬ë¦½íŠ¸ë¡œ ë³€ê²½
docker exec trading-backend python << 'EOF'
import asyncio
import asyncpg
import bcrypt

async def update_password():
    password = 'YourNewPassword123!'
    password_hash = bcrypt.hashpw(password.encode(), bcrypt.gensalt()).decode()

    conn = await asyncpg.connect(
        host='postgres',
        user='trading_user',
        password='SecureTradingDB2024',
        database='trading_prod'
    )

    await conn.execute(
        'UPDATE users SET password_hash = $1 WHERE email = $2',
        password_hash, 'admin@admin.com'
    )

    print('Password updated')
    await conn.close()

asyncio.run(update_password())
EOF
```

---

## ğŸ“Š ì£¼ìš” íŠ¹ì§• ìš”ì•½

### âœ… ì™„ë£Œëœ ê¸°ëŠ¥

1. **ê±°ë˜ì†Œ í†µí•©**
   - âœ… Bitget Futures API ì™„ì „ í†µí•©
   - âœ… ì‹¤ì‹œê°„ ì‹œì¥ ë°ì´í„° ìˆ˜ì§‘ (WebSocket)
   - âœ… ì£¼ë¬¸ ì‹¤í–‰ ë° í¬ì§€ì…˜ ê´€ë¦¬
   - âœ… ë ˆë²„ë¦¬ì§€ ì œì–´ (1x ~ 125x)

2. **AI ì—ì´ì „íŠ¸**
   - âœ… DeepSeek AI ì‹¤ì‹œê°„ ì‹œì¥ ë¶„ì„
   - âœ… AI ì „ëµ ìë™ ìƒì„± (3ê°œì”©)
   - âœ… 5ì´ˆë§ˆë‹¤ ì‹œì¥ ë¶„ì„ ë° ë§¤ë§¤ ì‹ í˜¸
   - âœ… í•œêµ­ì–´ ë¶„ì„ ê²°ê³¼ ì œê³µ

3. **ìë™ ë§¤ë§¤ ë´‡**
   - âœ… ë‹¤ì¤‘ ì „ëµ ì§€ì› (6ê°œ ì „ëµ)
   - âœ… ë™ì  ì „ëµ ë¡œë”©
   - âœ… ë¦¬ìŠ¤í¬ ê´€ë¦¬ (Stop Loss/Take Profit)
   - âœ… ìë™ ì¬ì‹œì‘ (ì„œë²„ ì¬ë¶€íŒ… ì‹œ)
   - âœ… ìµœì†Œ íˆ¬ìê¸ˆ ê²€ì¦ (10 USDT)

4. **ì‹¤ì‹œê°„ ì°¨íŠ¸**
   - âœ… Lightweight Charts í†µí•©
   - âœ… ë‹¤ì¤‘ íƒ€ì„í”„ë ˆì„ (1m ~ 1d)
   - âœ… ê±°ë˜ ë§ˆì»¤ í‘œì‹œ
   - âœ… WebSocket ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸

5. **ë°±í…ŒìŠ¤íŒ…**
   - âœ… ê³¼ê±° ë°ì´í„° ê¸°ë°˜ ì „ëµ ê²€ì¦
   - âœ… ìƒì„¸ ì„±ê³¼ ì§€í‘œ (PnL, Sharpe Ratio, MDD)
   - âœ… ë°±í…ŒìŠ¤íŠ¸ ì´ë ¥ ê´€ë¦¬

6. **ë³´ì•ˆ**
   - âœ… JWT ì¸ì¦
   - âœ… API í‚¤ Fernet ì•”í˜¸í™”
   - âœ… Rate Limiting
   - âœ… CORS ì„¤ì •
   - âœ… ì…ë ¥ ê²€ì¦

7. **ê´€ë¦¬ì ê¸°ëŠ¥**
   - âœ… ì‚¬ìš©ì ê´€ë¦¬
   - âœ… ë´‡ ëª¨ë‹ˆí„°ë§
   - âœ… ì‹œìŠ¤í…œ ë¡œê·¸
   - âœ… í†µê³„ ë° ë¶„ì„

8. **ë°°í¬ & ìš´ì˜**
   - âœ… Docker Compose êµ¬ì„±
   - âœ… PostgreSQL í”„ë¡œë•ì…˜ DB
   - âœ… Redis ìºì‹±
   - âœ… Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ
   - âœ… í—¬ìŠ¤ì²´í¬ êµ¬í˜„

---

## ğŸ¯ ì‹œìŠ¤í…œ í˜„í™©

### ë°°í¬ ì •ë³´
- **ì„œë²„**: 158.247.245.197
- **ìƒíƒœ**: âœ… ìš´ì˜ ì¤‘
- **ì»¨í…Œì´ë„ˆ**: 5ê°œ (backend, frontend, postgres, redis, admin-frontend)
- **ì—…íƒ€ì„**: 24/7

### ì‹¤ì‹œê°„ í†µê³„
- **í™œì„± ì‚¬ìš©ì**: 1ëª… (admin)
- **ë“±ë¡ëœ ì „ëµ**: 8ê°œ
- **AI ì „ëµ ì‹¤í–‰**: 5ì´ˆë§ˆë‹¤
- **ì‹¤ì‹œê°„ ë´‡ ìƒíƒœ**: Running
- **ë¶„ì„ ì‹¬ë³¼**: BTCUSDT @ ~$90,000

### AI ë¶„ì„ ìƒ˜í”Œ
```
ğŸ¤– DeepSeek AI Signal: hold (confidence: 0.5)
ğŸ“ Reason: í˜„ì¬ ê°€ê²©ì´ MA9ê³¼ MA21 ì‚¬ì´ì—ì„œ íš¡ë³´ ì¤‘ì´ë©°,
          RSIëŠ” ì¤‘ë¦½ êµ¬ê°„. ëª…í™•í•œ ì¶”ì„¸ë‚˜ ëŒíŒŒ ì‹ í˜¸ê°€ ë¶€ì¡±í•¨.
```

---

## ğŸ“ ë§ˆë¬´ë¦¬

ì´ ë¬¸ì„œëŠ” Auto Dashboard í”„ë¡œì íŠ¸ì˜ **ì „ì²´ êµ¬í˜„ ìƒí™©**ì„ ìƒì„¸í•˜ê²Œ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤.

**ì£¼ìš” ë‚´ìš©**:
- âœ… ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë° ë°ì´í„° íë¦„
- âœ… ë°±ì—”ë“œ 36ê°œ API ì—”ë“œí¬ì¸íŠ¸
- âœ… í”„ë¡ íŠ¸ì—”ë“œ 15ê°œ í˜ì´ì§€
- âœ… DeepSeek AI ì‹¤ì‹œê°„ ë¶„ì„ ì‹œìŠ¤í…œ
- âœ… PostgreSQL 25ê°œ í…Œì´ë¸” ì„¤ê³„
- âœ… Docker ê¸°ë°˜ í”„ë¡œë•ì…˜ ë°°í¬
- âœ… ë³´ì•ˆ ë° ì¸ì¦ ì²´ê³„

**í˜„ì¬ ìƒíƒœ**: Production Ready + AI Integration Complete

**ì‘ì„±ì**: Claude Code
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-12-14

---

